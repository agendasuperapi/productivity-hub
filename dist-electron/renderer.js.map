{
  "version": 3,
  "sources": ["../electron/renderer.ts"],
  "sourcesContent": ["// @ts-nocheck\r\n// Renderer script - Interface l\u00F3gica para o Electron\r\n// Este arquivo \u00E9 compilado separadamente pelo tsconfig.electron.json\r\n\r\ninterface Tab {\r\n  id: string;\r\n  name: string;\r\n  url: string;\r\n  icon?: string;\r\n  color?: string;\r\n  keyboard_shortcut?: string;\r\n  zoom?: number;\r\n  group_id: string;\r\n}\r\n\r\ninterface TabGroup {\r\n  id: string;\r\n  name: string;\r\n  icon?: string;\r\n  color?: string;\r\n  position: number;\r\n  tabs: Tab[];\r\n}\r\n\r\ninterface UserConfig {\r\n  tab_groups: TabGroup[];\r\n  tabs: Tab[];\r\n}\r\n\r\n// Estado da aplica\u00E7\u00E3o\r\nlet currentConfig: UserConfig | null = null;\r\nlet activeTabId: string | null = null;\r\n\r\n// Elementos DOM\r\nconst loginContainer = document.getElementById('loginScreen');\r\nconst appContainer = document.getElementById('mainApp');\r\nconst loginForm = document.getElementById('loginForm');\r\nconst emailInput = document.getElementById('emailInput') as HTMLInputElement;\r\nconst passwordInput = document.getElementById('passwordInput') as HTMLInputElement;\r\nconst loginError = document.getElementById('errorMessage');\r\nconst tabsBar = document.getElementById('tabsBar');\r\nconst contentArea = document.getElementById('contentArea');\r\nconst logoutBtn = document.getElementById('logoutButton');\r\n\r\n// Verificar se electronAPI est\u00E1 dispon\u00EDvel\r\nfunction waitForElectronAPI(): Promise<void> {\r\n  return new Promise((resolve) => {\r\n    if (window.electronAPI) {\r\n      resolve();\r\n      return;\r\n    }\r\n    const checkInterval = setInterval(() => {\r\n      if (window.electronAPI) {\r\n        clearInterval(checkInterval);\r\n        resolve();\r\n      }\r\n    }, 10);\r\n    // Timeout ap\u00F3s 5 segundos\r\n    setTimeout(() => {\r\n      clearInterval(checkInterval);\r\n      if (!window.electronAPI) {\r\n        console.error('electronAPI n\u00E3o est\u00E1 dispon\u00EDvel ap\u00F3s 5 segundos');\r\n      }\r\n      resolve();\r\n    }, 5000);\r\n  });\r\n}\r\n\r\n// Inicializa\u00E7\u00E3o\r\nasync function init() {\r\n  // Aguardar electronAPI estar dispon\u00EDvel\r\n  await waitForElectronAPI();\r\n  \r\n  if (!window.electronAPI) {\r\n    console.error('electronAPI n\u00E3o est\u00E1 dispon\u00EDvel');\r\n    if (loginError) {\r\n      loginError.textContent = 'Erro: API do Electron n\u00E3o est\u00E1 dispon\u00EDvel';\r\n      loginError.classList.add('show');\r\n    }\r\n    return;\r\n  }\r\n  \r\n  try {\r\n    const result = await window.electronAPI.getSession();\r\n    if (result?.session?.user) {\r\n      await loadApp();\r\n    } else {\r\n      showLogin();\r\n    }\r\n  } catch (error) {\r\n    console.error('Erro ao inicializar:', error);\r\n    showLogin();\r\n  }\r\n}\r\n\r\n// Mostrar tela de login\r\nfunction showLogin() {\r\n  if (loginContainer) loginContainer.classList.add('active');\r\n  if (appContainer) appContainer.style.display = 'none';\r\n}\r\n\r\n// Mostrar aplica\u00E7\u00E3o\r\nfunction showApp() {\r\n  if (loginContainer) loginContainer.classList.remove('active');\r\n  if (appContainer) appContainer.style.display = 'flex';\r\n}\r\n\r\n// Carregar aplica\u00E7\u00E3o ap\u00F3s login\r\nasync function loadApp() {\r\n  showApp();\r\n  \r\n  try {\r\n    const result = await window.electronAPI.fetchConfig();\r\n    console.log('Resultado do fetchConfig:', result);\r\n    \r\n    if (result?.success && result.config) {\r\n      currentConfig = result.config;\r\n      console.log('Configura\u00E7\u00E3o carregada:', currentConfig);\r\n      renderTabs();\r\n      registerShortcuts();\r\n    } else {\r\n      const errorMsg = result?.error || 'Erro desconhecido ao carregar configura\u00E7\u00F5es';\r\n      console.error('Erro ao carregar configura\u00E7\u00F5es:', errorMsg);\r\n      if (contentArea) {\r\n        contentArea.innerHTML = `<div class=\"loading\" style=\"color: #ff6b6b;\">Erro ao carregar configura\u00E7\u00F5es: ${errorMsg}</div>`;\r\n      }\r\n    }\r\n  } catch (error: any) {\r\n    console.error('Erro ao carregar configura\u00E7\u00F5es:', error);\r\n    const errorMsg = error?.message || 'Erro desconhecido';\r\n    if (contentArea) {\r\n      contentArea.innerHTML = `<div class=\"loading\" style=\"color: #ff6b6b;\">Erro ao carregar configura\u00E7\u00F5es: ${errorMsg}</div>`;\r\n    }\r\n  }\r\n}\r\n\r\n// Renderizar tabs na barra de tabs\r\nfunction renderTabs() {\r\n  if (!tabsBar || !currentConfig) return;\r\n  \r\n  tabsBar.innerHTML = '';\r\n  \r\n  const groups = currentConfig.tab_groups || [];\r\n  const tabs = currentConfig.tabs || [];\r\n  \r\n  // Ordenar grupos por posi\u00E7\u00E3o\r\n  groups.sort((a, b) => a.position - b.position).forEach(group => {\r\n    const groupTabs = tabs.filter(tab => tab.group_id === group.id);\r\n    \r\n    groupTabs.forEach(tab => {\r\n      const tabButton = document.createElement('button');\r\n      tabButton.className = `tab-button ${activeTabId === tab.id ? 'active' : ''}`;\r\n      tabButton.dataset.tabId = tab.id;\r\n      tabButton.innerHTML = `\r\n        <span class=\"tab-icon\">${tab.icon || '\uD83D\uDD17'}</span>\r\n        <span>${tab.name}</span>\r\n        ${tab.keyboard_shortcut ? `<span style=\"opacity: 0.5; font-size: 10px; margin-left: 4px;\">${tab.keyboard_shortcut}</span>` : ''}\r\n      `;\r\n      tabButton.addEventListener('click', () => openTab(tab));\r\n      tabsBar.appendChild(tabButton);\r\n    });\r\n  });\r\n  \r\n  // Limpar \u00E1rea de conte\u00FAdo\r\n  if (contentArea) {\r\n    contentArea.innerHTML = '<div class=\"loading\">Clique em uma aba para abrir</div>';\r\n  }\r\n}\r\n\r\n// Abrir aba\r\nasync function openTab(tab: Tab) {\r\n  activeTabId = tab.id;\r\n  renderTabs(); // Atualizar estado ativo\r\n  \r\n  try {\r\n    await window.electronAPI.createWindow(tab);\r\n  } catch (error) {\r\n    console.error('Erro ao abrir aba:', error);\r\n  }\r\n}\r\n\r\n// Registrar atalhos de teclado\r\nasync function registerShortcuts() {\r\n  if (!currentConfig) return;\r\n  \r\n  // Limpar atalhos anteriores\r\n  await window.electronAPI.unregisterAllShortcuts();\r\n  \r\n  const tabs = currentConfig.tabs || [];\r\n  for (const tab of tabs) {\r\n    if (tab.keyboard_shortcut) {\r\n      try {\r\n        await window.electronAPI.registerShortcut(tab.keyboard_shortcut, tab.id);\r\n      } catch (error) {\r\n        console.error(`Erro ao registrar atalho ${tab.keyboard_shortcut}:`, error);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// Event Listeners\r\n\r\n// Login form\r\nloginForm?.addEventListener('submit', async (e) => {\r\n  e.preventDefault();\r\n  \r\n  const email = emailInput?.value;\r\n  const password = passwordInput?.value;\r\n  \r\n  if (!email || !password) {\r\n    if (loginError) {\r\n      loginError.textContent = 'Preencha todos os campos';\r\n      loginError.classList.add('show');\r\n    }\r\n    return;\r\n  }\r\n  \r\n  if (!window.electronAPI) {\r\n    if (loginError) {\r\n      loginError.textContent = 'Erro: API do Electron n\u00E3o est\u00E1 dispon\u00EDvel';\r\n      loginError.classList.add('show');\r\n    }\r\n    return;\r\n  }\r\n  \r\n  try {\r\n    const result = await window.electronAPI.login(email, password);\r\n    if (result.error) {\r\n      if (loginError) {\r\n        loginError.textContent = result.error.message || 'Erro ao fazer login';\r\n        loginError.classList.add('show');\r\n      }\r\n    } else {\r\n      if (loginError) loginError.classList.remove('show');\r\n      await loadApp();\r\n    }\r\n  } catch (error: any) {\r\n    if (loginError) {\r\n      loginError.textContent = error.message || 'Erro ao fazer login';\r\n      loginError.classList.add('show');\r\n    }\r\n  }\r\n});\r\n\r\n// Logout\r\nlogoutBtn?.addEventListener('click', async () => {\r\n  try {\r\n    await window.electronAPI.logout();\r\n    currentConfig = null;\r\n    activeTabId = null;\r\n    showLogin();\r\n  } catch (error) {\r\n    console.error('Erro ao fazer logout:', error);\r\n  }\r\n});\r\n\r\n// Listener para atalhos de teclado\r\nwindow.electronAPI?.onShortcutTriggered?.((tabId: string) => {\r\n  if (!currentConfig) return;\r\n  \r\n  const tab = currentConfig.tabs?.find(t => t.id === tabId);\r\n  if (tab) {\r\n    openTab(tab);\r\n  }\r\n});\r\n\r\n// Listener para mudan\u00E7as de autentica\u00E7\u00E3o\r\nwindow.electronAPI?.onAuthStateChanged?.((data: any) => {\r\n  if (data.event === 'SIGNED_OUT') {\r\n    currentConfig = null;\r\n    activeTabId = null;\r\n    showLogin();\r\n  } else if (data.event === 'SIGNED_IN' && data.session) {\r\n    loadApp();\r\n  }\r\n});\r\n\r\n// Iniciar\r\ndocument.addEventListener('DOMContentLoaded', init);\r\n"],
  "mappings": "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",
  "names": []
}
